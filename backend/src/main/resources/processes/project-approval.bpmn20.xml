<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:flowable="http://flowable.org/bpmn"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
             xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
             targetNamespace="http://demo.com/bpm"
             xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL
                                 http://www.omg.org/spec/BPMN/20100524/MODEL/BPMN20.xsd">

    <process id="project-approval" name="Project Approval - Multi-Stakeholder" isExecutable="true">
        <documentation>
            Project approval workflow requiring sign-off from multiple stakeholders.
            Demonstrates parallel approval paths, handoffs, and final completion
            only after all required stakeholders have approved.
        </documentation>

        <!-- Start Event -->
        <startEvent id="startEvent" name="Project Proposal Submitted">
            <documentation>New project proposal submitted for approval</documentation>
        </startEvent>

        <sequenceFlow id="flow1" sourceRef="startEvent" targetRef="initializeProject"/>

        <!-- Service Task: Initialize Project -->
        <scriptTask id="initializeProject" name="Initialize Project Workflow"
                    scriptFormat="javascript" flowable:autoStoreVariables="true">
            <script>
                <![CDATA[
                var budget = execution.getVariable('budget') || 0;
                var department = execution.getVariable('department') || 'General';
                var projectType = execution.getVariable('projectType') || 'standard';

                // Initialize approval tracking
                execution.setVariable('technicalApproved', false);
                execution.setVariable('financialApproved', false);
                execution.setVariable('legalApproved', false);
                execution.setVariable('executiveApproved', false);

                // Track who approved what
                execution.setVariable('technicalApprover', '');
                execution.setVariable('financialApprover', '');
                execution.setVariable('legalApprover', '');
                execution.setVariable('executiveApprover', '');

                // Determine required approvals based on project size
                var requiresLegal = budget > 25000 || projectType == 'legal' || projectType == 'compliance';
                var requiresExecutive = budget > 100000;

                execution.setVariable('requiresLegal', requiresLegal);
                execution.setVariable('requiresExecutive', requiresExecutive);
                execution.setVariable('currentPhase', 'PARALLEL_REVIEW');
                execution.setVariable('escalationHistory', '[]');
                execution.setVariable('handoffHistory', '[]');
                ]]>
            </script>
        </scriptTask>

        <sequenceFlow id="flow2" sourceRef="initializeProject" targetRef="parallelReviewStart"/>

        <!-- Parallel Gateway: Start Parallel Review -->
        <parallelGateway id="parallelReviewStart" name="Start Parallel Reviews"/>

        <sequenceFlow id="flowToTechnical" sourceRef="parallelReviewStart" targetRef="technicalReview"/>
        <sequenceFlow id="flowToFinancial" sourceRef="parallelReviewStart" targetRef="financialReview"/>
        <sequenceFlow id="flowToLegal" sourceRef="parallelReviewStart" targetRef="checkLegalRequired"/>

        <!-- User Task: Technical Review -->
        <userTask id="technicalReview" name="Technical Review"
                  flowable:candidateGroups="supervisors"
                  flowable:formKey="project-technical-review">
            <documentation>
                Review technical feasibility of project: ${projectName}.
                Budget: $${budget}. Timeline: ${timeline}.
                Assess technical requirements, resources, and risks.
                Actions: Approve, Reject, Request Changes, Escalate to Manager.
            </documentation>
        </userTask>

        <sequenceFlow id="flow3" sourceRef="technicalReview" targetRef="checkTechnicalDecision"/>

        <!-- Gateway: Check Technical Decision -->
        <exclusiveGateway id="checkTechnicalDecision" name="Technical Decision"/>

        <sequenceFlow id="flowTechApproved" sourceRef="checkTechnicalDecision" targetRef="recordTechnicalApproval">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'approved'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowTechRejected" sourceRef="checkTechnicalDecision" targetRef="endRejected">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'rejected'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowTechEscalate" sourceRef="checkTechnicalDecision" targetRef="technicalManagerReview">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'escalate'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowTechRequestChanges" sourceRef="checkTechnicalDecision" targetRef="addressTechnicalChanges">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'request_changes'}]]>
            </conditionExpression>
        </sequenceFlow>

        <!-- User Task: Address Technical Changes -->
        <userTask id="addressTechnicalChanges" name="Address Technical Feedback"
                  flowable:assignee="${initiator}"
                  flowable:formKey="project-revision-form">
            <documentation>Address technical feedback: ${technicalFeedback}</documentation>
        </userTask>

        <sequenceFlow id="flowTechChangesAddressed" sourceRef="addressTechnicalChanges" targetRef="technicalReview"/>

        <!-- User Task: Technical Manager Review (Escalation) -->
        <userTask id="technicalManagerReview" name="Technical Manager Review"
                  flowable:candidateGroups="managers"
                  flowable:formKey="project-technical-review">
            <documentation>
                Escalated Technical Review for: ${projectName}.
                Escalation Reason: ${escalationReason}.
                Actions: Approve, Reject, De-escalate.
            </documentation>
        </userTask>

        <sequenceFlow id="flow4" sourceRef="technicalManagerReview" targetRef="checkTechMgrDecision"/>

        <exclusiveGateway id="checkTechMgrDecision" name="Tech Manager Decision"/>

        <sequenceFlow id="flowTechMgrApproved" sourceRef="checkTechMgrDecision" targetRef="recordTechnicalApproval">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'approved'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowTechMgrRejected" sourceRef="checkTechMgrDecision" targetRef="endRejected">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'rejected'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowTechMgrDeEscalate" sourceRef="checkTechMgrDecision" targetRef="technicalReview">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'de_escalate'}]]>
            </conditionExpression>
        </sequenceFlow>

        <!-- Script Task: Record Technical Approval -->
        <scriptTask id="recordTechnicalApproval" name="Record Technical Approval"
                    scriptFormat="javascript" flowable:autoStoreVariables="true">
            <script>
                <![CDATA[
                execution.setVariable('technicalApproved', true);
                var approver = execution.getVariable('completedBy') || 'unknown';
                execution.setVariable('technicalApprover', approver);
                execution.setVariable('technicalApprovalTime', new Date().toISOString());
                ]]>
            </script>
        </scriptTask>

        <sequenceFlow id="flowTechDone" sourceRef="recordTechnicalApproval" targetRef="parallelReviewEnd"/>

        <!-- User Task: Financial Review -->
        <userTask id="financialReview" name="Financial Review"
                  flowable:candidateGroups="supervisors"
                  flowable:formKey="project-financial-review">
            <documentation>
                Review financial aspects of project: ${projectName}.
                Budget: $${budget}. ROI Expected: ${expectedROI}.
                Assess budget allocation, cost-benefit, and financial risks.
                Actions: Approve, Reject, Request Changes, Escalate to Finance Manager.
            </documentation>
        </userTask>

        <sequenceFlow id="flow5" sourceRef="financialReview" targetRef="checkFinancialDecision"/>

        <!-- Gateway: Check Financial Decision -->
        <exclusiveGateway id="checkFinancialDecision" name="Financial Decision"/>

        <sequenceFlow id="flowFinApproved" sourceRef="checkFinancialDecision" targetRef="recordFinancialApproval">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'approved'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowFinRejected" sourceRef="checkFinancialDecision" targetRef="endRejected">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'rejected'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowFinEscalate" sourceRef="checkFinancialDecision" targetRef="financeManagerReview">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'escalate'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowFinRequestChanges" sourceRef="checkFinancialDecision" targetRef="addressFinancialChanges">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'request_changes'}]]>
            </conditionExpression>
        </sequenceFlow>

        <!-- User Task: Address Financial Changes -->
        <userTask id="addressFinancialChanges" name="Address Financial Feedback"
                  flowable:assignee="${initiator}"
                  flowable:formKey="project-revision-form">
            <documentation>Address financial feedback: ${financialFeedback}</documentation>
        </userTask>

        <sequenceFlow id="flowFinChangesAddressed" sourceRef="addressFinancialChanges" targetRef="financialReview"/>

        <!-- User Task: Finance Manager Review (Escalation) -->
        <userTask id="financeManagerReview" name="Finance Manager Review"
                  flowable:candidateGroups="managers"
                  flowable:formKey="project-financial-review">
            <documentation>
                Escalated Financial Review for: ${projectName}.
                Escalation Reason: ${escalationReason}.
                Actions: Approve, Reject, De-escalate.
            </documentation>
        </userTask>

        <sequenceFlow id="flow6" sourceRef="financeManagerReview" targetRef="checkFinMgrDecision"/>

        <exclusiveGateway id="checkFinMgrDecision" name="Finance Manager Decision"/>

        <sequenceFlow id="flowFinMgrApproved" sourceRef="checkFinMgrDecision" targetRef="recordFinancialApproval">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'approved'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowFinMgrRejected" sourceRef="checkFinMgrDecision" targetRef="endRejected">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'rejected'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowFinMgrDeEscalate" sourceRef="checkFinMgrDecision" targetRef="financialReview">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'de_escalate'}]]>
            </conditionExpression>
        </sequenceFlow>

        <!-- Script Task: Record Financial Approval -->
        <scriptTask id="recordFinancialApproval" name="Record Financial Approval"
                    scriptFormat="javascript" flowable:autoStoreVariables="true">
            <script>
                <![CDATA[
                execution.setVariable('financialApproved', true);
                var approver = execution.getVariable('completedBy') || 'unknown';
                execution.setVariable('financialApprover', approver);
                execution.setVariable('financialApprovalTime', new Date().toISOString());
                ]]>
            </script>
        </scriptTask>

        <sequenceFlow id="flowFinDone" sourceRef="recordFinancialApproval" targetRef="parallelReviewEnd"/>

        <!-- Check if Legal Required -->
        <exclusiveGateway id="checkLegalRequired" name="Legal Required?"/>

        <sequenceFlow id="flowLegalRequired" sourceRef="checkLegalRequired" targetRef="legalReview">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${requiresLegal == true}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowLegalNotRequired" sourceRef="checkLegalRequired" targetRef="skipLegalApproval">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${requiresLegal == false}]]>
            </conditionExpression>
        </sequenceFlow>

        <!-- Script Task: Skip Legal -->
        <scriptTask id="skipLegalApproval" name="Skip Legal (Not Required)"
                    scriptFormat="javascript" flowable:autoStoreVariables="true">
            <script>
                <![CDATA[
                execution.setVariable('legalApproved', true);
                execution.setVariable('legalApprover', 'N/A - Not Required');
                ]]>
            </script>
        </scriptTask>

        <sequenceFlow id="flowLegalSkipped" sourceRef="skipLegalApproval" targetRef="parallelReviewEnd"/>

        <!-- User Task: Legal Review -->
        <userTask id="legalReview" name="Legal Review"
                  flowable:candidateGroups="supervisors"
                  flowable:formKey="project-legal-review">
            <documentation>
                Review legal and compliance aspects of project: ${projectName}.
                Budget: $${budget}. Project Type: ${projectType}.
                Assess contracts, regulations, and legal risks.
                Actions: Approve, Reject, Request Changes, Escalate to Legal Director.
            </documentation>
        </userTask>

        <sequenceFlow id="flow7" sourceRef="legalReview" targetRef="checkLegalDecision"/>

        <!-- Gateway: Check Legal Decision -->
        <exclusiveGateway id="checkLegalDecision" name="Legal Decision"/>

        <sequenceFlow id="flowLegalApproved" sourceRef="checkLegalDecision" targetRef="recordLegalApproval">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'approved'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowLegalRejected" sourceRef="checkLegalDecision" targetRef="endRejected">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'rejected'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowLegalEscalate" sourceRef="checkLegalDecision" targetRef="legalDirectorReview">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'escalate'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowLegalRequestChanges" sourceRef="checkLegalDecision" targetRef="addressLegalChanges">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'request_changes'}]]>
            </conditionExpression>
        </sequenceFlow>

        <!-- User Task: Address Legal Changes -->
        <userTask id="addressLegalChanges" name="Address Legal Feedback"
                  flowable:assignee="${initiator}"
                  flowable:formKey="project-revision-form">
            <documentation>Address legal feedback: ${legalFeedback}</documentation>
        </userTask>

        <sequenceFlow id="flowLegalChangesAddressed" sourceRef="addressLegalChanges" targetRef="legalReview"/>

        <!-- User Task: Legal Director Review (Escalation) -->
        <userTask id="legalDirectorReview" name="Legal Director Review"
                  flowable:candidateGroups="directors"
                  flowable:formKey="project-legal-review">
            <documentation>
                Escalated Legal Review for: ${projectName}.
                Escalation Reason: ${escalationReason}.
                Actions: Approve, Reject, De-escalate.
            </documentation>
        </userTask>

        <sequenceFlow id="flow8" sourceRef="legalDirectorReview" targetRef="checkLegalDirDecision"/>

        <exclusiveGateway id="checkLegalDirDecision" name="Legal Director Decision"/>

        <sequenceFlow id="flowLegalDirApproved" sourceRef="checkLegalDirDecision" targetRef="recordLegalApproval">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'approved'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowLegalDirRejected" sourceRef="checkLegalDirDecision" targetRef="endRejected">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'rejected'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowLegalDirDeEscalate" sourceRef="checkLegalDirDecision" targetRef="legalReview">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'de_escalate'}]]>
            </conditionExpression>
        </sequenceFlow>

        <!-- Script Task: Record Legal Approval -->
        <scriptTask id="recordLegalApproval" name="Record Legal Approval"
                    scriptFormat="javascript" flowable:autoStoreVariables="true">
            <script>
                <![CDATA[
                execution.setVariable('legalApproved', true);
                var approver = execution.getVariable('completedBy') || 'unknown';
                execution.setVariable('legalApprover', approver);
                execution.setVariable('legalApprovalTime', new Date().toISOString());
                ]]>
            </script>
        </scriptTask>

        <sequenceFlow id="flowLegalDone" sourceRef="recordLegalApproval" targetRef="parallelReviewEnd"/>

        <!-- Parallel Gateway: End Parallel Review -->
        <parallelGateway id="parallelReviewEnd" name="All Reviews Complete"/>

        <sequenceFlow id="flow9" sourceRef="parallelReviewEnd" targetRef="checkExecutiveRequired"/>

        <!-- Check if Executive Approval Required -->
        <exclusiveGateway id="checkExecutiveRequired" name="Executive Required?"/>

        <sequenceFlow id="flowExecRequired" sourceRef="checkExecutiveRequired" targetRef="executiveFinalApproval">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${requiresExecutive == true}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowExecNotRequired" sourceRef="checkExecutiveRequired" targetRef="endApproved">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${requiresExecutive == false}]]>
            </conditionExpression>
        </sequenceFlow>

        <!-- User Task: Executive Final Approval -->
        <userTask id="executiveFinalApproval" name="Executive Final Approval"
                  flowable:candidateGroups="executives"
                  flowable:formKey="project-executive-approval">
            <documentation>
                FINAL EXECUTIVE APPROVAL for project: ${projectName}.
                Budget: $${budget}. Timeline: ${timeline}.

                All preliminary approvals received:
                - Technical: ${technicalApprover}
                - Financial: ${financialApprover}
                - Legal: ${legalApprover}

                Actions: Approve (Final), Reject, Send Back for Review.
            </documentation>
        </userTask>

        <sequenceFlow id="flow10" sourceRef="executiveFinalApproval" targetRef="checkExecFinalDecision"/>

        <!-- Gateway: Check Executive Final Decision -->
        <exclusiveGateway id="checkExecFinalDecision" name="Executive Final Decision"/>

        <sequenceFlow id="flowExecFinalApproved" sourceRef="checkExecFinalDecision" targetRef="endApproved">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'approved'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowExecFinalRejected" sourceRef="checkExecFinalDecision" targetRef="endRejected">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'rejected'}]]>
            </conditionExpression>
        </sequenceFlow>

        <sequenceFlow id="flowExecSendBack" sourceRef="checkExecFinalDecision" targetRef="resetForReview">
            <conditionExpression xsi:type="tFormalExpression">
                <![CDATA[${decision == 'request_changes'}]]>
            </conditionExpression>
        </sequenceFlow>

        <!-- Script Task: Reset for Review -->
        <scriptTask id="resetForReview" name="Reset for New Review Cycle"
                    scriptFormat="javascript" flowable:autoStoreVariables="true">
            <script>
                <![CDATA[
                // Reset all approvals for a new review cycle
                execution.setVariable('technicalApproved', false);
                execution.setVariable('financialApproved', false);
                execution.setVariable('legalApproved', false);
                execution.setVariable('reviewCycle', (execution.getVariable('reviewCycle') || 0) + 1);
                ]]>
            </script>
        </scriptTask>

        <sequenceFlow id="flowResetDone" sourceRef="resetForReview" targetRef="parallelReviewStart"/>

        <!-- End Events -->
        <endEvent id="endApproved" name="Project Approved">
            <documentation>
                Project has been fully approved by all required stakeholders.
                Technical: ${technicalApprover}
                Financial: ${financialApprover}
                Legal: ${legalApprover}
                Executive: ${executiveApprover}
            </documentation>
        </endEvent>

        <endEvent id="endRejected" name="Project Rejected">
            <documentation>Project has been rejected</documentation>
        </endEvent>

    </process>

    <bpmndi:BPMNDiagram id="BPMNDiagram_project-approval">
        <bpmndi:BPMNPlane id="BPMNPlane_project-approval" bpmnElement="project-approval">
            <!-- Start Event -->
            <bpmndi:BPMNShape id="startEvent_di" bpmnElement="startEvent">
                <dc:Bounds x="100" y="350" width="36" height="36"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="78" y="393" width="80" height="27"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <!-- Initialize Project -->
            <bpmndi:BPMNShape id="initializeProject_di" bpmnElement="initializeProject">
                <dc:Bounds x="200" y="328" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <!-- Parallel Review Start -->
            <bpmndi:BPMNShape id="parallelReviewStart_di" bpmnElement="parallelReviewStart">
                <dc:Bounds x="365" y="343" width="50" height="50"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="345" y="400" width="90" height="14"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <!-- TECHNICAL REVIEW PATH (Top Row) -->
            <bpmndi:BPMNShape id="technicalReview_di" bpmnElement="technicalReview">
                <dc:Bounds x="480" y="100" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="checkTechnicalDecision_di" bpmnElement="checkTechnicalDecision" isMarkerVisible="true">
                <dc:Bounds x="645" y="115" width="50" height="50"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="addressTechnicalChanges_di" bpmnElement="addressTechnicalChanges">
                <dc:Bounds x="620" y="200" width="100" height="60"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="technicalManagerReview_di" bpmnElement="technicalManagerReview">
                <dc:Bounds x="760" y="100" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="checkTechMgrDecision_di" bpmnElement="checkTechMgrDecision" isMarkerVisible="true">
                <dc:Bounds x="925" y="115" width="50" height="50"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="recordTechnicalApproval_di" bpmnElement="recordTechnicalApproval">
                <dc:Bounds x="1040" y="100" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <!-- FINANCIAL REVIEW PATH (Middle Row) -->
            <bpmndi:BPMNShape id="financialReview_di" bpmnElement="financialReview">
                <dc:Bounds x="480" y="328" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="checkFinancialDecision_di" bpmnElement="checkFinancialDecision" isMarkerVisible="true">
                <dc:Bounds x="645" y="343" width="50" height="50"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="addressFinancialChanges_di" bpmnElement="addressFinancialChanges">
                <dc:Bounds x="620" y="428" width="100" height="60"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="financeManagerReview_di" bpmnElement="financeManagerReview">
                <dc:Bounds x="760" y="328" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="checkFinMgrDecision_di" bpmnElement="checkFinMgrDecision" isMarkerVisible="true">
                <dc:Bounds x="925" y="343" width="50" height="50"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="recordFinancialApproval_di" bpmnElement="recordFinancialApproval">
                <dc:Bounds x="1040" y="328" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <!-- LEGAL REVIEW PATH (Bottom Row) -->
            <bpmndi:BPMNShape id="checkLegalRequired_di" bpmnElement="checkLegalRequired" isMarkerVisible="true">
                <dc:Bounds x="505" y="553" width="50" height="50"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="skipLegalApproval_di" bpmnElement="skipLegalApproval">
                <dc:Bounds x="620" y="620" width="100" height="60"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="legalReview_di" bpmnElement="legalReview">
                <dc:Bounds x="620" y="538" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="checkLegalDecision_di" bpmnElement="checkLegalDecision" isMarkerVisible="true">
                <dc:Bounds x="785" y="553" width="50" height="50"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="addressLegalChanges_di" bpmnElement="addressLegalChanges">
                <dc:Bounds x="760" y="638" width="100" height="60"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="legalDirectorReview_di" bpmnElement="legalDirectorReview">
                <dc:Bounds x="900" y="538" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="checkLegalDirDecision_di" bpmnElement="checkLegalDirDecision" isMarkerVisible="true">
                <dc:Bounds x="1065" y="553" width="50" height="50"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="recordLegalApproval_di" bpmnElement="recordLegalApproval">
                <dc:Bounds x="1040" y="460" width="100" height="60"/>
            </bpmndi:BPMNShape>

            <!-- Parallel Review End -->
            <bpmndi:BPMNShape id="parallelReviewEnd_di" bpmnElement="parallelReviewEnd">
                <dc:Bounds x="1205" y="343" width="50" height="50"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="1185" y="400" width="90" height="14"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <!-- Executive Path -->
            <bpmndi:BPMNShape id="checkExecutiveRequired_di" bpmnElement="checkExecutiveRequired" isMarkerVisible="true">
                <dc:Bounds x="1315" y="343" width="50" height="50"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="executiveFinalApproval_di" bpmnElement="executiveFinalApproval">
                <dc:Bounds x="1430" y="328" width="100" height="80"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="checkExecFinalDecision_di" bpmnElement="checkExecFinalDecision" isMarkerVisible="true">
                <dc:Bounds x="1595" y="343" width="50" height="50"/>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="resetForReview_di" bpmnElement="resetForReview">
                <dc:Bounds x="1430" y="200" width="100" height="60"/>
            </bpmndi:BPMNShape>

            <!-- End Events -->
            <bpmndi:BPMNShape id="endApproved_di" bpmnElement="endApproved">
                <dc:Bounds x="1702" y="350" width="36" height="36"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="1680" y="393" width="80" height="14"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <bpmndi:BPMNShape id="endRejected_di" bpmnElement="endRejected">
                <dc:Bounds x="1702" y="560" width="36" height="36"/>
                <bpmndi:BPMNLabel>
                    <dc:Bounds x="1680" y="603" width="80" height="14"/>
                </bpmndi:BPMNLabel>
            </bpmndi:BPMNShape>

            <!-- Sequence Flows -->
            <bpmndi:BPMNEdge id="flow1_di" bpmnElement="flow1">
                <di:waypoint x="136" y="368"/>
                <di:waypoint x="200" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flow2_di" bpmnElement="flow2">
                <di:waypoint x="300" y="368"/>
                <di:waypoint x="365" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowToTechnical_di" bpmnElement="flowToTechnical">
                <di:waypoint x="390" y="343"/>
                <di:waypoint x="390" y="140"/>
                <di:waypoint x="480" y="140"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowToFinancial_di" bpmnElement="flowToFinancial">
                <di:waypoint x="415" y="368"/>
                <di:waypoint x="480" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowToLegal_di" bpmnElement="flowToLegal">
                <di:waypoint x="390" y="393"/>
                <di:waypoint x="390" y="578"/>
                <di:waypoint x="505" y="578"/>
            </bpmndi:BPMNEdge>

            <!-- Technical Path Flows -->
            <bpmndi:BPMNEdge id="flow3_di" bpmnElement="flow3">
                <di:waypoint x="580" y="140"/>
                <di:waypoint x="645" y="140"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowTechApproved_di" bpmnElement="flowTechApproved">
                <di:waypoint x="695" y="140"/>
                <di:waypoint x="1040" y="140"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowTechRejected_di" bpmnElement="flowTechRejected">
                <di:waypoint x="670" y="115"/>
                <di:waypoint x="670" y="60"/>
                <di:waypoint x="1720" y="60"/>
                <di:waypoint x="1720" y="560"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowTechEscalate_di" bpmnElement="flowTechEscalate">
                <di:waypoint x="695" y="140"/>
                <di:waypoint x="760" y="140"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowTechRequestChanges_di" bpmnElement="flowTechRequestChanges">
                <di:waypoint x="670" y="165"/>
                <di:waypoint x="670" y="200"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowTechChangesAddressed_di" bpmnElement="flowTechChangesAddressed">
                <di:waypoint x="620" y="230"/>
                <di:waypoint x="530" y="230"/>
                <di:waypoint x="530" y="180"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flow4_di" bpmnElement="flow4">
                <di:waypoint x="860" y="140"/>
                <di:waypoint x="925" y="140"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowTechMgrApproved_di" bpmnElement="flowTechMgrApproved">
                <di:waypoint x="975" y="140"/>
                <di:waypoint x="1040" y="140"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowTechMgrRejected_di" bpmnElement="flowTechMgrRejected">
                <di:waypoint x="950" y="115"/>
                <di:waypoint x="950" y="60"/>
                <di:waypoint x="1720" y="60"/>
                <di:waypoint x="1720" y="560"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowTechMgrDeEscalate_di" bpmnElement="flowTechMgrDeEscalate">
                <di:waypoint x="925" y="140"/>
                <di:waypoint x="890" y="140"/>
                <di:waypoint x="890" y="80"/>
                <di:waypoint x="530" y="80"/>
                <di:waypoint x="530" y="100"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowTechDone_di" bpmnElement="flowTechDone">
                <di:waypoint x="1140" y="140"/>
                <di:waypoint x="1230" y="140"/>
                <di:waypoint x="1230" y="343"/>
            </bpmndi:BPMNEdge>

            <!-- Financial Path Flows -->
            <bpmndi:BPMNEdge id="flow5_di" bpmnElement="flow5">
                <di:waypoint x="580" y="368"/>
                <di:waypoint x="645" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowFinApproved_di" bpmnElement="flowFinApproved">
                <di:waypoint x="695" y="368"/>
                <di:waypoint x="1040" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowFinRejected_di" bpmnElement="flowFinRejected">
                <di:waypoint x="670" y="393"/>
                <di:waypoint x="670" y="520"/>
                <di:waypoint x="1720" y="520"/>
                <di:waypoint x="1720" y="560"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowFinEscalate_di" bpmnElement="flowFinEscalate">
                <di:waypoint x="695" y="368"/>
                <di:waypoint x="760" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowFinRequestChanges_di" bpmnElement="flowFinRequestChanges">
                <di:waypoint x="670" y="393"/>
                <di:waypoint x="670" y="428"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowFinChangesAddressed_di" bpmnElement="flowFinChangesAddressed">
                <di:waypoint x="620" y="458"/>
                <di:waypoint x="530" y="458"/>
                <di:waypoint x="530" y="408"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flow6_di" bpmnElement="flow6">
                <di:waypoint x="860" y="368"/>
                <di:waypoint x="925" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowFinMgrApproved_di" bpmnElement="flowFinMgrApproved">
                <di:waypoint x="975" y="368"/>
                <di:waypoint x="1040" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowFinMgrRejected_di" bpmnElement="flowFinMgrRejected">
                <di:waypoint x="950" y="393"/>
                <di:waypoint x="950" y="520"/>
                <di:waypoint x="1720" y="520"/>
                <di:waypoint x="1720" y="560"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowFinMgrDeEscalate_di" bpmnElement="flowFinMgrDeEscalate">
                <di:waypoint x="925" y="368"/>
                <di:waypoint x="890" y="368"/>
                <di:waypoint x="890" y="300"/>
                <di:waypoint x="530" y="300"/>
                <di:waypoint x="530" y="328"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowFinDone_di" bpmnElement="flowFinDone">
                <di:waypoint x="1140" y="368"/>
                <di:waypoint x="1205" y="368"/>
            </bpmndi:BPMNEdge>

            <!-- Legal Path Flows -->
            <bpmndi:BPMNEdge id="flowLegalRequired_di" bpmnElement="flowLegalRequired">
                <di:waypoint x="555" y="578"/>
                <di:waypoint x="620" y="578"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowLegalNotRequired_di" bpmnElement="flowLegalNotRequired">
                <di:waypoint x="530" y="603"/>
                <di:waypoint x="530" y="650"/>
                <di:waypoint x="620" y="650"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowLegalSkipped_di" bpmnElement="flowLegalSkipped">
                <di:waypoint x="720" y="650"/>
                <di:waypoint x="1230" y="650"/>
                <di:waypoint x="1230" y="393"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flow7_di" bpmnElement="flow7">
                <di:waypoint x="720" y="578"/>
                <di:waypoint x="785" y="578"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowLegalApproved_di" bpmnElement="flowLegalApproved">
                <di:waypoint x="835" y="578"/>
                <di:waypoint x="860" y="578"/>
                <di:waypoint x="860" y="490"/>
                <di:waypoint x="1040" y="490"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowLegalRejected_di" bpmnElement="flowLegalRejected">
                <di:waypoint x="810" y="603"/>
                <di:waypoint x="810" y="710"/>
                <di:waypoint x="1720" y="710"/>
                <di:waypoint x="1720" y="596"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowLegalEscalate_di" bpmnElement="flowLegalEscalate">
                <di:waypoint x="835" y="578"/>
                <di:waypoint x="900" y="578"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowLegalRequestChanges_di" bpmnElement="flowLegalRequestChanges">
                <di:waypoint x="810" y="603"/>
                <di:waypoint x="810" y="638"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowLegalChangesAddressed_di" bpmnElement="flowLegalChangesAddressed">
                <di:waypoint x="760" y="668"/>
                <di:waypoint x="670" y="668"/>
                <di:waypoint x="670" y="618"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flow8_di" bpmnElement="flow8">
                <di:waypoint x="1000" y="578"/>
                <di:waypoint x="1065" y="578"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowLegalDirApproved_di" bpmnElement="flowLegalDirApproved">
                <di:waypoint x="1090" y="553"/>
                <di:waypoint x="1090" y="520"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowLegalDirRejected_di" bpmnElement="flowLegalDirRejected">
                <di:waypoint x="1115" y="578"/>
                <di:waypoint x="1702" y="578"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowLegalDirDeEscalate_di" bpmnElement="flowLegalDirDeEscalate">
                <di:waypoint x="1065" y="578"/>
                <di:waypoint x="1020" y="578"/>
                <di:waypoint x="1020" y="510"/>
                <di:waypoint x="670" y="510"/>
                <di:waypoint x="670" y="538"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowLegalDone_di" bpmnElement="flowLegalDone">
                <di:waypoint x="1140" y="490"/>
                <di:waypoint x="1230" y="490"/>
                <di:waypoint x="1230" y="393"/>
            </bpmndi:BPMNEdge>

            <!-- Executive and End Flows -->
            <bpmndi:BPMNEdge id="flow9_di" bpmnElement="flow9">
                <di:waypoint x="1255" y="368"/>
                <di:waypoint x="1315" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowExecRequired_di" bpmnElement="flowExecRequired">
                <di:waypoint x="1365" y="368"/>
                <di:waypoint x="1430" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowExecNotRequired_di" bpmnElement="flowExecNotRequired">
                <di:waypoint x="1340" y="343"/>
                <di:waypoint x="1340" y="290"/>
                <di:waypoint x="1720" y="290"/>
                <di:waypoint x="1720" y="350"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flow10_di" bpmnElement="flow10">
                <di:waypoint x="1530" y="368"/>
                <di:waypoint x="1595" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowExecFinalApproved_di" bpmnElement="flowExecFinalApproved">
                <di:waypoint x="1645" y="368"/>
                <di:waypoint x="1702" y="368"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowExecFinalRejected_di" bpmnElement="flowExecFinalRejected">
                <di:waypoint x="1620" y="393"/>
                <di:waypoint x="1620" y="578"/>
                <di:waypoint x="1702" y="578"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowExecSendBack_di" bpmnElement="flowExecSendBack">
                <di:waypoint x="1620" y="343"/>
                <di:waypoint x="1620" y="230"/>
                <di:waypoint x="1530" y="230"/>
            </bpmndi:BPMNEdge>

            <bpmndi:BPMNEdge id="flowResetDone_di" bpmnElement="flowResetDone">
                <di:waypoint x="1430" y="230"/>
                <di:waypoint x="390" y="230"/>
                <di:waypoint x="390" y="343"/>
            </bpmndi:BPMNEdge>
        </bpmndi:BPMNPlane>
    </bpmndi:BPMNDiagram>
</definitions>
