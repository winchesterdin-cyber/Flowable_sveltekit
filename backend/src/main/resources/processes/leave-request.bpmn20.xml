<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:flowable="http://flowable.org/bpmn"
             targetNamespace="http://www.flowable.org/processdef">

  <process id="leave-request" name="Leave Request" isExecutable="true">
    <startEvent id="startEvent" />
    <sequenceFlow sourceRef="startEvent" targetRef="supervisorApproval" />

    <userTask id="supervisorApproval" name="Supervisor Approval" flowable:candidateGroups="SUPERVISOR">
      <documentation>Review leave request for ${days} days</documentation>
    </userTask>
    <sequenceFlow sourceRef="supervisorApproval" targetRef="daysCheckGateway" />

    <exclusiveGateway id="daysCheckGateway" />
    <sequenceFlow sourceRef="daysCheckGateway" targetRef="executiveApproval">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${days > 5}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow sourceRef="daysCheckGateway" targetRef="endEvent">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${days <= 5}]]></conditionExpression>
    </sequenceFlow>

    <userTask id="executiveApproval" name="Executive Approval" flowable:candidateGroups="EXECUTIVE">
      <documentation>Review long leave request for ${days} days</documentation>
    </userTask>
    <sequenceFlow sourceRef="executiveApproval" targetRef="endEvent" />

    <endEvent id="endEvent" />
  </process>
</definitions>
